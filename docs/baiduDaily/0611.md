# 0611

入职的第二天，第一次看到企业级的源码，开心的一批。<br>
花臂大哥帮我解决了个大问题！~同时也发现了`webpack.module.rules`的一个bug<br>
项目正常dev，所有的文件也能正常被编译，但是打开浏览器在console中抛出`__webpack__require__ is not a function`，显然是哪一步错了使babel在编译报错。<br>
`babel-loader`的排除项中，不支持复杂正则，返回的永远是false。事实上，在exclude中需要排除`@baidu`中的依赖，因为里面的文件是没有编译成js的，所以需要在webpack中编译。<br>
debug出这个这个错误，花了好久，花臂哥的思路让我对webpack的理解又深一步：
- 猜测疑似webpack的manifest文件未引入
- 猜测疑似`dev`的plugin项导致wbepack编译异常，删除plugin中，保留definedll，看看是否能编译成功
- 可能是`babel7`导致，回滚代码看看能否解决，决定是不是`babel`版本太高导致
最终确定是`babel`导致，在`.babelrc`中debug发现babel处理了`node_modules`中的所有文件，就是说`exclude`完全没有生效，所以通过function的形式定义返回值，解决。<br>
不管是`龙舟`还是`ai-store`，都以`pug`作为html模板，今天回家要好好撸一遍pug了。<br>
溜了溜了，赶班车
