# 0612

花臂哥又给我上课啦，舒服了，记录一波<br>
问题是没法HMR<br>
- pug的loader本身不支持热更新
- pug中的在`html-webpack-plugin`定义的变量属于冷数据，是在webpack中的`mounted`这个钩子上执行，所以启动只能被编译一次，也没办法HMR
原理是，webpack中先执行html-webpack-plugin，存放变量的mock文件是先经过htmlWebpackPlugin然后，提供给pug、html。<br>
由于项目多个页面用到mock文件中的数据，所以写在webpack中是最好的方法，如果不这么做只能在pug中定义变量，但是不能够像js一样引入js文件。<br>
HMR其实只能更新js入口文件中的模块，编译pug的时候是在build阶段实施而不是runtime，所以刷新之后能更新数据说明这点。<br>

