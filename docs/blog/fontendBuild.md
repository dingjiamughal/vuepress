# 前端自动化构建

随着web应用的不断复杂化，前端自动化构建已成为当今前端开发中必不可少的一部分。
每当写这类博文的时候就很难受，构建这个词可写的范围实在太大，写用法api太多了还不如去读文档，写业务场景自己所了解的业务也不太复杂不具有说服力，不如就从`what&how`聊聊前端自动化构建吧。
* 什么是自动化构建、自动化构建的好处是什么
* 如何进行自动化构建
::: tip
  Simple Usage、Efficient Builds、Quality Ecosystem
:::
这是gulp对其构建工具的优点介绍，通俗的说就是让简单的任务简单，复杂的任务可管理

<!-- ## 简单的任务简单
这里拿gulp作为一个例子，gulp能帮助我们实现最基本的分离开发版本和生产版本，前端代码文件的拷贝编译压缩迁移，模块热更新，启动本地服务等等。比如编译`sass`，编译`es6/7`，js文件的uglify等等。最简单基础的也是需要人工操作的很多东西都可以使用gulp此类构建工具进行构建打包，至于gulp到底是什么，能解决什么，如何使用这些下文会进行详细的介绍。

## 复杂的任务可管理
这是gulp最大的优点，意味着浮夸的说假使一个web多页应用有100张页面，页面中需要引用100个js和css，复杂的业务代码一次次的更迭之后变得难以维护，自动化构建能够完美解决复杂业务逻辑。例如一个页面n个区域，我们可以设计以html代码片段或者脚本或是样式甚至是图片作为模块，然后进行多次复用而并不用担心是否会变量或是面对复杂的一匹的函数嵌套后期无法维护，我们只需要搭建一个自动化构建的轮子。 -->

### 一些问题
翻开n年前的老项目的前端代码，总结出几点：
* 前后端不分离，页面上会出现后台逻辑，也许是为了高性能高seo，不过现在的mvvm框架都可实现服务端渲染。
* 代码量巨大，各种文件引入，不易维护。
* 工具函数复杂 + 满天飞的第三方类库，不易维护。
* 无法做到模块的动态复用，不易维护
* 无法进行自动化的对css预处理语言以及es6/7语法进行编译以及模块的热更新，影响开发效率

现在看来，以上的任何一点都极大的影响了工作效率，如果是这样，那是时候对项目进行自动化构建了。

## 什么是自动化构建，好处是什么
我个人理解，构建就是页面中的一个个模块：html代码片段，js代码片段，css函数式编程甚至一张图片都可成一模块，我们在开发过程中（开发环境）对这些模块进行组装，最终生成静态文件，这个组装的过程就是自动化构建。
自动化构建的优势在于，可以完美解决以上的所有问题。随着前端业务量的不断增加，同时会用到各种第三方类库，自动化构建就能很好的帮助我们进行维护和管理，提高代码性能。

## 如何进行自动化构建
<!-- 这里先介绍一款入门级的构建工具`browsify` -->
### JavaScript的构建
传统的做法是引入script标签，如果文件多就难以管理，对js进行构建，我们只需要一个js文件就可以包含所有的js代码，同时也可使别的语言编译成js，例如`ts`,`cs`、`es6/7`，当然本文的重点是解决问题，所以抛出了第一个问题，以angularjs为例
我们要实现一个基础的添加数据、删除数据、页面渲染，最粗暴的方式就是写在一块，但是会很乱，我们想到的方法可以用全局变量定义`controller`
```js
var a=['$scope',function($scope){...}]
var b=['$scope',function($scope){...}]
var c=['$scope',function($scope){...}]
  angular.module('app',[])
        .controller('Controller',a)
        .controller('Controller',b)
        .controller('Controller',c)
```
这样做法的问题是全局变量的污染，当我们大型项目出现N个全局变量的时候，真的无力调试了，凡事给我们开发或者维护带来不便那就都是bug，为解决此类问题，这里引出一款入门级的构建工具`Browserify`来实现js的模块化加载。

`Browserify`中支持`commonJS`模块规范，使用`module.exports`定义js模块，`require`来加载js模块
